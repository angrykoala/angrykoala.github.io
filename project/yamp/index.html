<!DOCTYPE HTML><html><head><meta charset="utf-8"><title>Yamp › Angry Koala</title><meta name="author" content="angrykoala"><meta name="description" content="A blog for programmers and koalas"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="Yamp"><meta property="og:site_name" content="Angry Koala"><meta property="og:image" content=""><link href="/favicon.png" rel="icon"><link rel="alternate" href="/atom.xml" title="Angry Koala" type="application/atom+xml"><link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"><!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--></head></html><body><header id="header"><div class="meta inner"><h1><a href="/">Angry Koala</a></h1><h2><a href="/">A Koala With a Computer</a></h2><nav id="main-nav"><ul><li><a href="/archives">Archives</a></li><li><a href="https://github.com/angrykoala" rel="external nofollow noopener noreferrer" target="_blank">GitHub</a></li><li><a href="/projects">My Projects</a></li><li><a href="/about">About</a></li></ul><div class="clearfix"></div></nav></div><div class="clearfix"></div></header><div id="content" class="inner"><div id="main-col" class="alignleft"><div id="wrapper"><article class="post"><div class="post-content"><header><h1 class="title">Yamp</h1><time datetime="2016-09-17T23:55:00.000Z">2016-09-18</time></header><div class="entry"><blockquote><p>Yet Another Markdown Parser</p></blockquote><p><a href="https://en.wikipedia.org/wiki/Markdown" rel="external nofollow noopener noreferrer" target="_blank">Markdown</a> is cool. With a simple syntax<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> is possible to create document form webpages to presentation slides (and, of course, this same blog you are reading). <strong>Yamp</strong> is here to simplify your work with markdown for whatever you are using it. Check Yamp in action <a href="https://angrykoala.github.io/yamp/index.html">here</a>.</p><a id="more"></a><h2><span id="features">Features</span></h2><ul><li>HTML conversion</li><li>PDF conversion</li><li>Code highlight support</li><li>Github-style output</li><li>API to use <em>yamp</em> programmatically</li><li>Custom styles</li><li>CSS-embedded HTML (just open it offline in any browser)</li><li>HTML tags support (for PDF output too)</li><li>Include other files in your markdown</li><li><a href="https://remarkjs.com/" rel="external nofollow noopener noreferrer" target="_blank">HTML presentations</a></li><li>Koalafied</li></ul><h2><span id="basic-manual">Basic Manual</span></h2><p>Yamp allows you to convert a markdown file into other formats such as Html or Pdf. Also, it provides templates and styles out of the box to make the conversion as simple as possible.</p><h3><span id="installation">Installation</span></h3><p>To install <em>yamp</em> you can clone the project from <a href="https://github.com/angrykoala/yamp" rel="external nofollow noopener noreferrer" target="_blank">Github</a> or simple install it from the npm repository<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>.</p><p>Assuming npm is installed in your system:<br></p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g yamp</span><br></pre></td></tr></table></figure><p></p><ul><li>If you have the GitHub project, execute <code>npm install -g .</code></li></ul><p><em>Yamp requires Node.js version 4.0.0 or higher</em></p><h3><span id="usage">Usage</span></h3><p>With <code>yamp my_file.md</code> your markdown file will be converted to pdf directly</p><ul><li>To convert to html use: <code>yamp my_file.md --html</code></li><li>To convert to html and pdf use: <code>yamp my_file.md --html --pdf</code></li></ul><p>There are several options in <em>yamp</em>:</p><ul><li><code>-h</code>, <code>--help</code> to display a basic usage information</li><li><code>-V</code>, <code>--version</code> to display <em>yamp</em> version installed</li><li><code>-o</code>, <code>--output &lt;file&gt;</code> output filename (without extension) e.g. <code>yamp my_file.md -o final_name</code></li><li><code>--pdf</code> to generate a pdf (default)</li><li><code>--html</code>to generate html</li><li><code>--remark</code>to generate a html presentation using <a href="https://remarkjs.com" rel="external nofollow noopener noreferrer" target="_blank">remark</a></li><li><code>-t</code>, <code>--title [value]</code> to add a custom title to Html pages</li><li><code>--style &lt;file&gt;</code> to set a custom CSS stylesheet<ul><li>Option not suported along with <code>--no-style</code></li></ul></li><li><code>--no-style</code> to disable CSS styling<ul><li>Options not supported along with <code>--style &lt;file&gt;</code></li></ul></li><li><code>--minify</code> to minify Html output</li><li><code>--no-tags</code> to disable custom Yamp tags</li><li><code>--no-highlight</code> to disable code <a href="https://highlightjs.org" rel="external nofollow noopener noreferrer" target="_blank">highlight</a></li><li><code>-k</code>, <code>--koala</code> to koalify your outputs</li></ul><h3><span id="yamp-tags">Yamp tags</span></h3><p><em>Yamp</em> supports extra tags in your markdown files. Currently using <a href="https://github.com/angrykoala/xejs" rel="external nofollow noopener noreferrer" target="_blank">xejs</a> templates. All tags are written between double braces <code>{{ ... }}</code> and are not case-sensitive.</p><ul><li><code>{{include [file.md]}}</code>: Includes the given text file (markdown or not), the tags on the included file will also be parsed, allowing nested file structure.</li><li><code>{{date}}</code>: Will write the current date (at the moment of rendering).</li><li><code>{{page break}}</code>: Will force a page break in pdf output.</li><li><code>{{yamp version}}</code>: Will display the yamp version used to render the document.</li></ul><p>For example, if we have the documents:</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="section">## My title</span></span><br><span class="line"></span><br><span class="line">This is the first file</span><br><span class="line">&#123;%raw%&#125;&#123;&#123;include file2.md&#125;&#125;&#123;%endraw&#125;</span><br><span class="line">&#123;%raw%&#125;&#123;&#123;page break&#125;&#125;&#123;%endraw&#125;</span><br><span class="line">The end</span><br></pre></td></tr></table></figure><p><em>file1.md</em></p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">This is the second file</span><br></pre></td></tr></table></figure><p><em>file2.md</em></p><p>The resulting file will be:<br></p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line"><span class="section">## My title</span></span><br><span class="line"></span><br><span class="line">This is the first file</span><br><span class="line">This is the second file</span><br><span class="line">The end</span><br></pre></td></tr></table></figure><p></p><p>And when rendered into pdf, The end will be in a different page</p><h2><span id="for-pros">For Pros</span></h2><p>Yamp can also be used as a npm module:</p><p>To install yamp as dependency:<br></p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">npm <span class="keyword">install</span> <span class="comment">--save yamp</span></span><br></pre></td></tr></table></figure><p></p><p>To add it as a node.js dependency:<br></p><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">var yamp</span>=require(<span class="string">'yamp'</span>);</span><br></pre></td></tr></table></figure><p></p><h3><span id="yamp-api">Yamp API</span></h3><p>Include <em>yamp</em> in your javascript with:<br></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> yamp = <span class="built_in">require</span>(<span class="string">'yamp'</span>);</span><br></pre></td></tr></table></figure><p></p><p>You’ll have access to different <em>renderers</em> to process your files:</p><ul><li><code>yamp.renderers.html</code> to process a markdown file into an full Html page</li><li><code>yamp.renderers.pdf</code> to process a markdown into a pdf</li></ul><p>To use a renderer:<br></p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myRenderer = <span class="keyword">new</span> renderers.pdf(options);</span><br><span class="line">renderer.renderFile(myFile, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="built_in">console</span>.log(<span class="string">"Error while rendering: "</span>+err);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">console</span>.log(<span class="string">"Rendering was successful"</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p></p><h4><span id="options">Options</span></h4><p>The options accepted by the default renderers are:</p><ul><li><strong>outputFilename</strong>: name of the output filename (without extension), will default to the input filename</li><li><strong>highlight</strong>: (<em>true</em>) indicates if code blocks should be highlighted</li><li><strong>style</strong>: (<em>true</em>) indicates if default style should be used or no style at all. If a filename is passed, it will use it as custom css style</li><li><strong>minify</strong>: (<em>false</em>) whether the Html output should be minified or not</li><li><strong>title</strong>: Custom title for the Html page</li><li><strong>tags</strong>: (<em>true</em>) whether to parse yamp tags or not (<code>{{ ... }}</code>)</li><li><strong>koala</strong>: (<em>false</em>) true to koalify your outputs</li></ul><h3><span id="creating-new-renderers">Creating new renderers</span></h3><p>If you need a custom renderer, instead of using one of the defaults you can extend directly from <strong>Renderer</strong> class or any of the default renderers:</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyCustomRenderer</span> <span class="keyword">extends</span> <span class="title">yamp</span>.<span class="title">Renderer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">        <span class="keyword">super</span>(options, <span class="string">"default.ejs"</span>, yamp.parsers.md2Html);</span><br><span class="line">        <span class="keyword">this</span>.output=<span class="string">"html"</span>; <span class="comment">//desired output extension</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    beforeLoad(filename)&#123;</span><br><span class="line">        <span class="comment">//Modify filename or this.fileLoader before loading it</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    beforeRender(templateOptions) &#123;</span><br><span class="line">        <span class="comment">// Modify the data passed to the template before rendering, including title, content and options</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    afterRender(content) &#123;</span><br><span class="line">        <span class="comment">// Modify template result (Html)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fileOutput(content,done) &#123;</span><br><span class="line">        <span class="comment">// Write file (preferably to this.options.outputFilename) in the desired format using a parser</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Custom parser:</strong> It is possible to use a custom parser from markdown to Html instead of the built-in <em>yamp.parsers.md2html</em>, the parser must be a function of the type <code>function(originalString,options,callback)</code> that will translate from <code>originalString</code> (markdown) to html, calling the <code>callback(err,res)</code> afterwards.</p><p>If, instead of extending from <code>yamp.Renderer</code> you are extending from one of the default renderers, you should only re-implement the methods you need, and usually you should call <code>super().methodName</code> to maintain its basic functionality.</p><h3><span id="bibliography">Bibliography</span></h3><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none;padding-left:0"><li id="fn:1"><span style="display:inline-block;vertical-align:top;padding-right:10px">1.</span><span style="display:inline-block;vertical-align:top">Mastering markdown: <a href="https://guides.github.com/features/mastering-markdown" rel="external nofollow noopener noreferrer" target="_blank">https://guides.github.com/features/mastering-markdown</a></span><a href="#fnref:1" rev="footnote"> ↩</a></li><li id="fn:2"><span style="display:inline-block;vertical-align:top;padding-right:10px">2.</span><span style="display:inline-block;vertical-align:top">What is npm?: <a href="https://docs.npmjs.com/getting-started/what-is-npm" rel="external nofollow noopener noreferrer" target="_blank">https://docs.npmjs.com/getting-started/what-is-npm</a></span><a href="#fnref:2" rev="footnote"> ↩</a></li></ol></div></div></div><footer><div class="categories"><a href="/categories/project/">Project</a></div><div class="addthis addthis_toolbox addthis_default_style"><a class="addthis_button_tweet"></a> <a class="addthis_button_google_plusone" g:plusone:size="medium"></a> <a class="addthis_counter addthis_pill_style"></a></div><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js"></script><div class="clearfix"></div></footer></div></article><section id="comment"></section></div></div><aside id="sidebar" class="alignright"><div class="widget tag"><h3 class="title">Recent Posts</h3><ul class="entry"><li><a href="/project/gaucho/">Gaucho</a></li><li><a href="/project/yerbamate/">Yerbamate</a></li><li><a href="/project/yamp/">Yamp</a></li><li><a href="/tutorial/node-wizardry/">Node Wizadry</a></li><li><a href="/project/chuckscript/">ChuckScript</a></li></ul></div><div class="widget tag"><h3 class="title">Categories</h3><ul class="entry"><li><a href="/categories/general/">General</a><small>1</small></li><li><a href="/categories/project/">Project</a><small>4</small></li><li><a href="/categories/tutorial/">Tutorial</a><small>1</small></li></ul></div></aside><div class="clearfix"></div></div><footer id="footer" class="inner"><div class="alignleft">&copy; 2018 angrykoala</div><div class="clearfix"></div></footer><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script></body>